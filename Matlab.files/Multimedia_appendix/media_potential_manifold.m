clear all
set(groot,'defaultAxesTickLabelInterpreter','latex','defaulttextinterpreter','latex','defaultLegendInterpreter','latex');
addpath 'C:\Users\sleon\Dropbox\Post\SUTD.Postdoc\AAAI21.catastrophe\Matlab.files\Figures_potential_surface'

n = 16;
epsilon = 1e-7;
T = 0:0.02:2;
s = rng('shuffle') %1043117276
rng(1043119345)
rng
P = rand(n)*10;
[u,v] = generate_random_directions(P);
a = -10:0.2:10;
b = a;
map = inferno;
map = map(50:end,:);
 
plotential = zeros(length(a),length(b),length(T));

for k = 1:length(T)
    plotential(:,:,k) = compute_potential(u,v,a,b,P,T(k));
end

v = VideoWriter('media_potential.avi','Motion JPEG AVI');
v.Quality = 100;
v.FrameRate = 10;
open(v);

fs = surfc(a,b,plotential(:,:,1));
colormap(map);
fs(1).EdgeColor = '#666666';
xlabel('$d_1$');
ylabel('$d_2$');
zlabel('$\Phi^H$');
view([45 45]);
title(['Exploration rate $\delta = $ ' num2str(T(1))]); 
exportgraphics(gcf,'figure_presentation_click.png','BackgroundColor','white','Resolution','500')

for k = 1:length(T)
    fs = surfc(a,b,plotential(:,:,k));
    colormap(map);
    fs(1).EdgeColor = '#666666';
    xlabel('$d_1$');
    ylabel('$d_2$');
    zlabel('$\Phi^H$');
    view([45 45]);
    title(['Exploration rate $\delta = $ ' num2str(T(k))]); 
    frame  = getframe(gcf);
    writeVideo(v,frame);
end

for k = 1: 15
    frame  = getframe(gcf);
    writeVideo(v,frame);
end

  %  str = {'Snapshots of the modified potential $\Phi^H$ along two', 'random directions for various exploration rates $\delta$:', 'multiple (local) maxima for no exploration ($\delta=0$) vs single maximum', 'at (0,0) (uniform distribution) as exploration increases $(\delta: 0\to6)$'};
  %  text(-9,-9,52,str);

% for k = 1: 20
%     frame  = getframe(gcf);
%     writeVideo(v,frame);
% end

close(v);